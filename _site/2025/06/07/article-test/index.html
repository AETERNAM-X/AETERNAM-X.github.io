<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Windows WWW | Proxy Codex</title>
  <meta name="description" content="On TypeScript, ESlint, jest, TSDoc, Travis-CI, and VSCode (with inspirations from the Zen of Python)">

  <link rel="preload" href="/font/CPMono_v07_Plain.woff2" as="font" type="font/woff2" crossorigin="anonymous" fetchpriority="high">
  <link rel="stylesheet" href="/css/main.css" media="print" onload="this.media='all'">
  <link rel="canonical" href="https://aeternam-x.github.io//2025/06/07/article-test/">
  <link rel="alternate" type="application/rss+xml" title="Proxy Codex" href="https://aeternam-x.github.io//feed.xml">
  <link rel="icon" type="image/webp" href="/imgs/cropped.webp">

  <meta property="og:site_name" content="Proxy Codex">
  <meta property="og:title" content="Windows WWW">
  <meta property="og:type" content="article">
  <meta property="og:description" content="On TypeScript, ESlint, jest, TSDoc, Travis-CI, and VSCode (with inspirations from the Zen of Python).">
  <meta property="og:url" content="https://aeternam-x.github.io//2025/06/07/article-test/">
  
  <meta property="og:image" content="https://aeternam-x.github.io//imgs/cropped.webp">

  
  <meta property="article:published_time" content="2025-06-07T00:00:00-03:00">
  <meta property="article:author" content="https://aeternam-x.github.io//about/">
  
  
    
  
  
    
  <meta property="article:tag" content="tweaking">
    
  <meta property="article:tag" content="latency">
    
  <meta property="article:tag" content="windows">
    
  <meta property="article:tag" content="boost">
    
  
</head>
<body class="is-post-layout">
  <header class="site-header">
  <div class="wrapper">
    <a class="site-title" href="/">
      <img src="/imgs/cropped.webp" alt="Proxy Codex" class="site-logo" fetchpriority="high">
      <span class="site-title-text">Proxy Codex</span>
      <span class="site-tagline">NOTHING BUT THE BEST. </span>
    </a>
    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z" />
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z" />
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z" />
        </svg>
      </a>
      <div class="trigger">
        
        
        
        
        
        
        
        
        
        
        
        <a class="page-link" href="/projects/">Projects</a>
        
        
        
        <a class="page-link" href="/about/">About</a>
        
        
      </div>
    </nav>
  </div>
</header>
  <div class="page-content">
    <div class="wrapper">
      

<article class="post post-page-layout" itemscope itemtype="https://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">Windows WWW</h1>
    <p class="post-meta">
      <time datetime="2025-06-07T00:00:00-03:00" itemprop="datePublished">7 Jun 2025</time>
      
      - <span itemprop="author" itemscope itemtype="https://schema.org/Person"><span itemprop="name">Proxy</span></span>
      
      -
      
      <span>[tweaking]</span>
      
      <span>[latency]</span>
      
      <span>[windows]</span>
      
      <span>[boost]</span>
      
      
      <br>
      also at Quantum Tensors Medium <a href="https://medium.com/quantum-photons/how-i-learned-to-stop-worrying-and-love-the-types-tests-b6b5ee5e8ede">Windows WWW</a>
      on 2 Mar 2020
      
      
      
    </p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p><em>On TypeScript, ESlint, jest, TSDoc, Travis-CI, and VSCode (with inspirations from the Zen of Python)</em></p>

<p>It is fun to write fast without constraints, and run code in a flash. That is why I fell in love with Python and the Jupyter Notebook environment, a great tool for prototyping and interacting with data. However, interactive notebooks fall short when you want to write bigger, maintainable code. See the <a href="http://web.eecs.utk.edu/~azh/blog/notebookpainpoints.html">What’s wrong with computational notebooks?</a> survey:</p>

<p><img src="/imgs/2025/article-test/notebooks-chart.avif" alt="" loading="lazy" /></p>

<p>Restructuring and cleaning up code (refactoring) is being listed as one task notebooks are not meant for. For further reading on the pros and cons of notebooks, see <a href="https://yihui.org/en/2018/09/notebook-war/">The First Notebook War</a>. While I knew the concept of tests, I got discouraged by some overzealous test-driven development practices which make feature development slow and experimentation — even slower. In data science, you pretty much need to take an iterative approach to data. Creating meticulous tests before exploring the data is a big mistake, and will result in a well-crafted garbage-in, garbage-out pipeline. We need an environment flexible enough to encourage experiments, especially in the initial place.</p>

<p>Moreover: writing clever code is tempting! Why should you deny yourself the fun of solving a seemingly difficult problem in a one-liner? Well, there is a word of caution, and it’s called <a href="https://github.com/dwmkerr/hacker-laws#kernighans-law">the Kernighan’s Law</a>:</p>

<blockquote>
  <p>Debugging is twice as hard as writing the code in the first place. Therefore, if you write the code as cleverly as possible, you are, by definition, not smart enough to debug it.
In other words: being smart won’t make you automatically a good software engineer. The combination of high intelligence and no software engineering skills often results in code-golf-style contraptions that do the job but are completely incomprehensible for anyone else (including their authors’ future selves). This may explain the baseline <a href="https://academia.stackexchange.com/questions/23237/why-are-papers-without-code-but-with-results-accepted/23238#23238">code quality in academia</a>.</p>
</blockquote>

<hr />

<p>Last autumn, I got invited to the Centre for Quantum Technologies at the National University of Singapore to lead the creation of <a href="https://github.com/Quantum-Game/">Quantum Game with Photons 2</a>. It is a bigger project, with a few people on board (with various skillsets), so things that would work for solo coding won’t fly there. And I learned a lot, by trial and error.</p>

<p>I got quite a few insights from things most software engineers take for granted: <strong>types</strong> and <strong>tests</strong>. If you are a fellow (ex-)scientist, have ADHD (I do) or for any other reason find yourself too impatient, or smart, to set types and write tests: this post is for you! In this post I will discuss:</p>

<ul>
  <li>TypeScript as an improvement over JavaScript</li>
  <li>Code documentation with TSDocs</li>
  <li>ESLint as a “spell checker” and automatic style guide for code</li>
  <li>Tests (with jest framework)</li>
  <li>Continuous integration with Travis CI and Codecov</li>
</ul>

<h1 id="typescript">TypeScript</h1>

<p>Since it is a browser-based game, JavaScript was an obvious choice. We chose <a href="https://www.typescriptlang.org/">TypeScript</a> (<em>“JavaScript with types”</em>) as its dialect, and never looked back. We all used <a href="https://code.visualstudio.com/">VSCode</a> open-source editor, due to its TypeScript support and rich plugin ecosystem</p>

<p><a href="https://twitter.com/pmigdal/status/1179329959598313473"><img src="/imgs/2025/article-test/pmigdal-tweet-typescript.avif" alt="" /></a></p>

<p>In principle, types are not necessary. All in all, everything in the computer is a long sequence of zeros and ones. But almost always we want to <strong>restrict</strong> what we can do with a particular variable to things that make sense, in the given context. There are exotic cases when we want to treat 0s and 1s of a <strong>float</strong> using operations for an <strong>integer</strong>, vide <a href="https://en.wikipedia.org/wiki/Fast_inverse_square_root">fast inverse square root</a>. But there are rare exceptions that do deserve a few extra lines of switching between types. In Python, when trying to do a dubious operation, you get an error pretty soon. In JavaScript… an undefined can fly through a few layers of abstraction, causing an error in a seemingly unrelated piece of code. We can get funny results due to using different types. Open a console, write:</p>

<p><code class="language-plaintext highlighter-rouge">function add(a, b) { return +(a + b) }</code></p>

<p>And then try to <code class="language-plaintext highlighter-rouge">add(2,2)</code> and <code class="language-plaintext highlighter-rouge">add('2', 2)</code>. In both cases, you get a number… but, is it the same one? Sure, this case is trivial. But what if this function were much more complicated, had a few arguments (in non-obvious order), and its input arguments came from different functions (from modules or packages you don’t maintain)? Even in Python, the error happens in the runtime. Why not see it coming while writing code? In TypeScript, with a few keystrokes, we can set:</p>

<p><img src="/imgs/2025/article-test/typescript_add.avif" alt="" loading="lazy" /></p>

<p>I found that the overhead to use types in TypeScript is minimal (if any). When writing a new class, method or function, very often it is faster. Sure, I need to specify types of input and output. But then I get speedup due to autocompletion, hints, and linting if for any reason I make a mistake. Types give built-in testing — that a given function takes arguments of particular types. However, they also help greatly with the code readability. When seeing <code class="language-plaintext highlighter-rouge">changeVolume(volume: number)</code> you don’t need to guess if <code class="language-plaintext highlighter-rouge">volume</code> is a number, string, boolean, <code class="language-plaintext highlighter-rouge">Volume</code> object, or Cthulhu-knows-what. So, let’s start with a few lines of <a href="https://www.python.org/dev/peps/pep-0020/">Zen of Python</a>:</p>

<blockquote>
  <p>Explicit is better than implicit.</p>

  <h2 id="in-the-face-of-ambiguity-refuse-the-temptation-to-guess">In the face of ambiguity, refuse the temptation to guess.</h2>
</blockquote>

<p>To be fair: there is quite a lot missing in TypeScript types. For example, integer types would help a lot in typical tasks such as accessing an array or iterating a loop; even if they are stored as floats, I want to make sure someone won’t take the 2.5-th element of a list. Still, for me, TS is a day and night difference with JavaScript.</p>

<h3 id="further-reading">Further reading</h3>

<ul>
  <li><a href="https://blog.logrocket.com/is-typescript-worth-it/">Is TypeScript worth it? - LogRocket Blog</a></li>
</ul>

<h1 id="tsdoc">TSDoc</h1>

<p>Good comments do clarify code. <a href="https://github.com/microsoft/tsdoc">TSDoc</a> is a way of writing TypeScript comments where they’re linked to a particular function, class or method (like<a href="https://www.python.org/dev/peps/pep-0257/"> Python docstrings</a>).
<img src="/imgs/2025/article-test/tsdoc1.avif" alt="" loading="lazy" /></p>

<p>If we are clueless about what to write in the description, it may be a sign of a more fundamental problem:</p>

<blockquote>
  <p>If the implementation is hard to explain, it’s a bad idea.</p>

  <p>If the implementation is easy to explain, it may be a good idea.
Additionally, it is possible to create the whole documentations with <a href="https://github.com/TypeStrong/typedoc">TypeDoc</a>, see <a href="https://quantum-game.github.io/quantum-tensors/classes/_operator_.operator.html">Operator for Quantum Tensors</a>.</p>
  <h3 id="further-reading-1">Further reading</h3>
</blockquote>

<ul>
  <li><a href="https://coryrylan.com/blog/intro-to-typescript-documentation-with-tsdoc">Intro to TypeScript Documentation with TSDoc</a></li>
</ul>

<h1 id="eslint">ESLint</h1>

<p>Since the code runs, it is fine, right? Well, unless someone needs to read it. A collaborator, or yourself in 6 months. When the other person needs to develop it (use, expand, or rewrite) — there are so many things that can go wrong, be misunderstood, or take an unproportionate amount of time. When it comes to code, I have a strong belief that:</p>

<blockquote>
  <p>Readability counts.
<a href="http://eslint">ESLint</a> does automatic code linting — it’s “spell checking” for code and serves a few purposes:</p>
</blockquote>

<ul>
  <li>marking things that are incorrect,</li>
  <li>marking things that are unnecessary or risky (e.g. <code class="language-plaintext highlighter-rouge">if (x = 5) { ... }</code>)</li>
  <li>setting a standard way of writing code.
The first two are a no-brainer. It may be debatable what is “risky”, but we can customize that if needed.
<img src="/imgs/2025/article-test/opressive-silence-if-assignment.avif" alt="" loading="lazy" /></li>
</ul>

<p>Source: <a href="http://oppressive-silence.com/comic/oh-no-the-robots">oppressive-silence.com/comic/oh-no-the-robots</a>. Using <a href="https://eslint.org/docs/rules/no-cond-assign">no-cond-assign</a> would have saved their lives.</p>

<p>The standardization is less obvious. Personally, I like setting the linter to be as strict as possible, going in line with a controversial piece of wisdom from the Zen of Python:</p>

<blockquote>
  <p>There should be one — and preferably only one — obvious way to do it.
By reducing ways to write something, it reduces the number of unnecessary choices (<em>should I indent it or not?</em>) and allows me to use my cognitive resources in a more meaningful way. Moreover, it makes it much easier to collaborate. No more inconsistencies because one uses <strong>tabs</strong> and the other — <strong>spaces</strong>. Or different name conventions. Even if you verbally decide to use <strong>two spaces</strong>, it takes some cognitive power to self-police oneself… with no guarantee.
<a href="https://eslint.org/">ESLint</a> can be configured in various ways, to be laid back or strictly pedantic. There are many plugins with settings for particular languages and frameworks (such as TypeScript, Vue, etc) and styles (I recommend <a href="https://github.com/airbnb/javascript/">Airbnb style JavaScript style guide</a> and <a href="https://www.npmjs.com/package/eslint-config-airbnb-typescript">Airbnb TypeScript</a>).
Beautiful is better than ugly.</p>
</blockquote>

<p>Many plugins go with two possible settings: base (only errors) and recommended (enforcing good practices with style). I suggest going by default for the latter. If you need to override an option, it is easy. And IMHO it does not matter nearly as much what style you choose (if you want, go for tabs for indentation — you have my official blessing) as long as it is restrictive and enforced ruthlessly.
<img src="/imgs/2025/article-test/prettier.avif" alt="" loading="lazy" /></p>

<p>I do have a love and hate relationship with <a href="https://prettier.io/">Prettier</a>, another a code formatter purely focused on style. In some cases, it makes code, well, prettier and more standardized. However, for many things (say: indentations, trailing characters) Airbnb can do the job. I have also found that a restrictive approach to line width can occasionally produce an inconsistent style (and is pretty vocal about that).
<img src="/imgs/2025/article-test/prettier_bad.avif" alt="" loading="lazy" /></p>

<h3 id="further-reading-2">Further reading</h3>

<ul>
  <li><a href="https://github.com/typescript-eslint/typescript-eslint/blob/master/docs/getting-started/linting/README.md">typescript-eslint/typescript-eslint</a></li>
  <li><a href="https://blog.echobind.com/integrating-prettier-eslint-airbnb-style-guide-in-vscode-47f07b5d7d6a">Integrating Prettier + ESLint + Airbnb Style Guide in VSCode</a></li>
  <li><a href="https://itnext.io/keep-code-consistent-across-developers-the-easy-way-with-prettier-eslint-60bb7e91b76c">Keep Code Consistent Across Developers The Easy Way — With Prettier &amp; ESLint</a></li>
</ul>

<h1 id="jest">jest</h1>

<p>Testing seemed the way to slow down development, kill fun and momentum.</p>
<blockquote>
  <p>Errors should never pass silently.</p>
</blockquote>

<p>I won’t fool you: tests require you to write a few more lines of code (see <a href="https://jestjs.io/">jest</a> examples). But ask yourself: when writing a longer function, does it work on the first go? Always, no exceptions? Probably you have the same doubt, and at least test it somehow: open an app and eyeball it if it works, or open a console and check if you get a correct result (this REPL / Jupyter Notebook approach for testing). This interactive approach is fine… but manual. You need to do it each time you change your function. So, how about testing it once and then saving it for further use? Well, with <a href="https://github.com/jest-community/vscode-jest">VSCode plugin for jest</a> you can do that! Write a new test and the result. If you want to make it REPL-like, instead of writing <code class="language-plaintext highlighter-rouge">console.log(x.toString())</code> use <code class="language-plaintext highlighter-rouge">expect(x.toString()).toBe('')</code> and you will directly get the result.
<img src="/imgs/2025/article-test/jest_test_repl.avif" alt="" loading="lazy" /></p>

<p>Then, we can set it as a test. We wrote once but turned into a guardian of our code.
<img src="/imgs/2025/article-test/jest_test.avif" alt="" loading="lazy" /></p>

<p>Tests do not prove that the code works. They safeguard against mistakes, and usually stupid mistakes (e.g. instead of a sorted list in ascending order you get one in descending). It is fine to start adding tests gradually, by adding a few tests to things that are the most difficult (ones you need to keep fingers crossed so they work) or most critical (simple but with many other dependent components). But, if you want to gamify adding tests, there is a way to go!</p>
<h3 id="further-reading-3">Further reading</h3>

<ul>
  <li><a href="https://dev.to/muhajirdev/unit-testing-with-typescript-and-jest-2gln">Unit Testing with Typescript and Jest</a></li>
</ul>

<h1 id="travis-ci">Travis CI</h1>

<p>A typical issue with academic code is that it runs on a single computer, during a full moon. So how about testing it externally, with every single commit?
<img src="https://travis-ci.com/Quantum-Game/quantum-tensors" alt="https://travis-ci.com/Quantum-Game/quantum-tensors" />](/imgs/2025/article-test/travis_ci_checks_pull_request.avif){: loading=”lazy” }</p>

<p>Continuous integration makes it easy to check against cases when the code:</p>

<ul>
  <li>does not work (but someone didn’t test it and pushed haphazardly),</li>
  <li>does work only locally, as it is based on local installations,</li>
  <li>does work only locally, as not all files were committed.
Sounds too good to be easy? Well — to my surprise, I set it with a few clicks at <a href="https://travis-ci.com/Quantum-Game/quantum-tensors">Travis CI</a>, and by creating a <a href="https://github.com/Quantum-Game/quantum-tensors/blob/master/.travis.yml">.travis.yml</a> file in the repo:</li>
</ul>

<p>```yaml
language: node_js
node_js: node</p>

<p>before_script:</p>
<ul>
  <li>npm install -g typescript</li>
  <li>npm install codecov -g</li>
</ul>

<p>script:</p>
<ul>
  <li>yarn lint</li>
  <li>yarn build</li>
  <li>yarn test</li>
  <li>yarn build-docs</li>
</ul>

<p>after_success:</p>
<ul>
  <li>codecov</li>
</ul>

  </div>

  <script src="/lib/anchor.min.js"></script>
<script>
  anchors.add().remove(".post-title");
</script>

</article>
    </div>
  </div>
  <footer class="site-footer">
  <div class="wrapper">
    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
          <li>
            <a href="https://github.com/AETERNAM-X"><span class="icon icon--github"><svg viewBox="0 0 16 16"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>

</span><span class="username">AETERNAM-X</span></a>
          </li>
          <li>
            <span class="icon icon--discord"><?xml version="1.0" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 20010904//EN"
 "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd">
<svg version="1.0" xmlns="http://www.w3.org/2000/svg"
 width="300.000000pt" height="300.000000pt" viewBox="0 0 300.000000 300.000000"
 preserveAspectRatio="xMidYMid meet">

<g transform="translate(0.000000,300.000000) scale(0.100000,-0.100000)"
fill="#000000" stroke="none">
<path d="M905 2606 c-162 -41 -213 -57 -347 -113 l-106 -44 -50 -82 c-284
-467 -403 -873 -401 -1372 1 -259 -2 -249 99 -318 118 -81 316 -189 435 -237
93 -38 217 -80 235 -80 9 0 73 97 123 187 26 45 32 64 24 71 -7 5 -60 33 -119
62 -60 29 -108 56 -108 60 0 3 10 16 23 28 l22 21 95 -36 c384 -145 726 -169
1091 -78 95 24 228 67 301 99 34 15 37 14 62 -5 18 -14 24 -25 17 -33 -5 -6
-56 -33 -113 -61 -56 -27 -106 -54 -110 -59 -10 -14 134 -256 151 -256 28 0
180 56 326 120 65 28 270 147 360 208 l70 47 8 120 c34 515 -101 1040 -384
1493 l-62 99 -100 43 c-55 23 -125 51 -156 61 -64 23 -330 89 -355 89 -10 0
-31 -30 -56 -81 -37 -73 -44 -80 -65 -75 -104 26 -438 30 -585 7 -30 -5 -59
-7 -65 -5 -6 3 -28 38 -48 79 -30 61 -41 75 -59 74 -13 0 -81 -15 -153 -33z
m202 -943 c165 -78 214 -318 97 -476 -88 -120 -279 -133 -381 -26 -70 75 -101
181 -82 283 13 74 31 110 78 159 79 84 190 107 288 60z m996 1 c41 -21 104
-81 124 -118 62 -118 55 -237 -21 -351 -95 -143 -315 -144 -413 -2 -81 119
-82 265 -3 381 29 41 96 92 140 105 44 13 132 5 173 -15z"/>
</g>
</svg>
</span>
<span class="username">proxy133777</span>

          </li>
        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <p>Made for the truly discerning.</p>
      </div>
    </div>
  </div>

  <script async defer src="https://buttons.github.io/buttons.js"></script>
  <script type="application/ld+json">
  {
    "@context": "https://schema.org/",
    "@type": "Person",
    "name": "Proxy",
    "sameAs": [
      "https://github.com/AETERNAM-X"
    ]
  }
  </script>
</footer>
</body>
</html>